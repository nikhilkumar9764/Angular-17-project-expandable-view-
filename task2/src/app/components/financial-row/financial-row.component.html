<mat-row *ngIf="node.isGroupHeader"
         class="group-row"
         (click)="onToggle()">

  <mat-cell class="text-left expand-cell" [style]="getIndentStyle()">
    <button mat-icon-button>
      <mat-icon>
        {{ node.expanded ? 'expand_more' : 'chevron_right' }}
      </mat-icon>
    </button>
    <strong>{{ node.displayName }}</strong>
  </mat-cell>

  <mat-cell *ngFor="let _ of [].constructor(9)"></mat-cell>

  <mat-cell class="text-right">
    {{ formatPercentage(node.percentage) }}
  </mat-cell>

</mat-row>


  <!-- Detail Rows -->
     
  <ng-container *ngIf="!node.isGroupHeader && node.rows?.[0] as row0">

    <mat-row class="detail-row"
             (click)="node.hasDetails && onToggle()">
  
      <!-- Ccy -->
      <mat-cell class="text-left" [style]="getIndentStyle()">
        <button *ngIf="node.hasDetails" mat-icon-button>
          <mat-icon>
            {{ node.expanded ? 'expand_more' : 'chevron_right' }}
          </mat-icon>
        </button>
        {{ row0.col1 }}
      </mat-cell>
  
      <!-- Quantity -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col2) ? formatNumber(row0.col2, 3) : '' }}
      </mat-cell>
  
      <!-- Description -->
      <mat-cell class="text-left">{{ row0.col3 || '' }}</mat-cell>
  
      <!-- ESG -->
      <mat-cell class="text-center">
        <span *ngIf="node.esgRating">{{ node.esgRating }}</span>
      </mat-cell>
  
      <!-- Cost Price -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col4) ? formatNumber(row0.col4, 2) : '' }}
      </mat-cell>
  
      <!-- Cur Price -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col5) ? formatNumber(row0.col5, 2) : '' }}
      </mat-cell>
  
      <!-- Valuation -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col6) ? formatNumber(row0.col6, 0) : '' }}
      </mat-cell>
  
      <!-- Total CHF -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col7) ? formatNumber(row0.col7, 0) : '' }}
      </mat-cell>
  
      <!-- P/L -->
      <mat-cell class="text-right">
        {{ hasValue(row0.col8) ? formatPercentage(row0.col8) : '' }}
      </mat-cell>
  
      <!-- P/L YTD -->
      <ng-container *ngIf="node.rows?.[1] as row1">
        {{ hasValue(row1.col9) ? formatNumber(row1.col9, 2) : '' }}
      </ng-container>
       
      <!-- Perc -->
      <mat-cell class="text-right">
        {{ hasValue(node.percentage) ? formatPercentage(node.percentage) : '' }}
      </mat-cell>
  
    </mat-row>
  
  </ng-container>
  
     

  <!-- Children -->
  <ng-container *ngIf="node.expanded && node.children">
    <app-financial-row 
      *ngFor="let child of node.children"
      [node]="child"
      (toggleNode)="toggleNode.emit($event)">
    </app-financial-row>
  </ng-container>
